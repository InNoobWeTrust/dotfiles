#!/usr/bin/env sh

# Config dir
export CONF_SH_DIR=$HOME/.sh.d

# Environment definitions.
[[ -r $CONF_SH_DIR/vars.sh ]] && source "$CONF_SH_DIR/vars.sh"

# Function definitions.
[[ -r $CONF_SH_DIR/func.sh ]] && source "$CONF_SH_DIR/func.sh"

# PATH definition
[[ -r $CONF_SH_DIR/path.sh ]] && source "$CONF_SH_DIR/path.sh"

# Hook definitions
[[ -r $CONF_SH_DIR/hooks.sh ]] && source "$CONF_SH_DIR/hooks.sh"

# Completion definitions
[[ -r $CONF_SH_DIR/completion.sh ]] && source "$CONF_SH_DIR/completion.sh"

xhost +local:root > /dev/null 2>&1

usable complete && complete -cf sudo

# Expand aliases on non-interactive shell too
usable shopt && shopt -s expand_aliases

# Alias definitions.
[[ -r $CONF_SH_DIR/aliases.sh ]] && source "$CONF_SH_DIR/aliases.sh"

# Platform-aware definitions (WSL, CYGWIN,...).
for f in $(ls -1 $CONF_SH_DIR/platform_*.sh 2>/dev/null); do
    if [ -r $f ]; then
        source $f
    fi
done

# Custom definitions
[[ -r $HOME/.shrc.user ]] && source "$HOME/.shrc.user"
